(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{120:function(e,n,t){},148:function(e,n,t){"use strict";t.r(n);var a,r,c,s,i,o,d,m,l,j,b,x,h,p,u,O,g,f,w=t(0),v=t.n(w),y=t(36),k=t.n(y),N=(t(120),t(60)),S=t(14),I=t(19),C=t(21),T=C.a.div(a||(a=Object(I.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin:2rem;\n    padding:3rem;\n    @media (max-width: 550px) {\n        padding:2rem 0 2rem 0;\n    }\n    @media (max-width: 400px) {\n        margin:1rem;\n    }\n"]))),z=t(73),F=t.n(z),_=t(94),J=t(11),E=C.a.div(r||(r=Object(I.a)(["\n    max-width:650px;\n    @media (max-width: 768px) {\n        width:100%;\n    }\n"]))),R=C.a.div(c||(c=Object(I.a)(["\n    display: flex;\n    flex-direction: row;\n    background-color: #fff;\n    height:4rem;\n    max-width:650px;\n    margin:auto;\n    justify-content: space-between;\n    @media (max-width: 768px) {\n        width:100%;\n    }\n    box-shadow: 0px 0px 5px #ccc;\n"]))),A=C.a.div(s||(s=Object(I.a)(["\n    // padding:0.5rem 2rem;\n    font-size:1.2rem;\n    color:#000;\n    width:200px;\n    color: ",";\n    @media (max-width: 768px) {\n        // padding:0.5rem 1rem;\n        font-size:1rem;\n    }\n    @media (max-width: 500px) {\n        font-size:0.8rem;\n    }\n"])),(function(e){return e.CurrentTab?"#007FFF":""})),B=C.a.div(i||(i=Object(I.a)(["\n    box-shadow: 0px 0px 1px #ccc;\n    padding:3rem 6rem;\n    border:1px solid #ccc;\n    display:flex;\n    flex-direction:column;\n    @media (max-width: 768px) {\n        padding:3rem 3rem;\n    }\n    @media (max-width: 500px) {\n        padding:3rem 2rem;\n    }\n"]))),L=t(186),U=t(184),M=t(74),W=t.n(M),q=t(40),D=t.n(q),G=t(2),H=function(){var e=Object(S.f)(),n=v.a.useState(0),t=Object(J.a)(n,2),a=t[0],r=t[1],c=function(){var n=Object(_.a)(F.a.mark((function n(){var t,r;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==a){n.next=5;break}localStorage.setItem("username",D()("#username").val()),e("/chat/".concat(D()("#roomId").val())),n.next=32;break;case 5:if(1!==a){n.next=22;break}if(D()("#conformpassword").val()!==D()("#password").val()){n.next=19;break}return n.prev=7,n.next=10,W()({method:"post",url:"".concat(me,"/create_room"),data:{roomId:D()("#roomId").val(),password:D()("#password").val()},headers:{"Content-Type":"application/json",accept:"application/json"}});case 10:200===(t=n.sent).data.status?alert("".concat(t.data.message," roomId:").concat(t.data.roomCreated.roomId," password:").concat(t.data.roomCreated.password)):alert("".concat(t.data.message)),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(7),alert("Room already exists");case 17:n.next=20;break;case 19:alert("password and conformpassword not matched");case 20:n.next=32;break;case 22:return n.prev=22,n.next=25,W()({method:"delete",url:"".concat(me,"/delete_room"),data:{roomId:D()("#roomId").val(),password:D()("#password").val()},headers:{"Content-Type":"application/json",accept:"application/json"}});case 25:(r=n.sent).data.status,alert("".concat(r.data.message)),n.next=32;break;case 29:n.prev=29,n.t1=n.catch(22),alert("invalid roomId or password");case 32:case"end":return n.stop()}}),n,null,[[7,14],[22,29]])})));return function(){return n.apply(this,arguments)}}();return Object(G.jsxs)(E,{children:[Object(G.jsx)("h3",{className:"text-center mb-4",children:"Chat Rooms"}),Object(G.jsxs)(R,{children:[Object(G.jsx)(L.a,{onClick:function(){r(0)},children:Object(G.jsx)(A,{CurrentTab:0===a,children:"join room"})}),Object(G.jsx)(L.a,{onClick:function(){r(1)},children:Object(G.jsx)(A,{CurrentTab:1===a,children:"create room"})}),Object(G.jsx)(L.a,{onClick:function(){r(2)},children:Object(G.jsx)(A,{CurrentTab:2===a,children:"delete room"})})]}),Object(G.jsxs)(B,{children:[0===a?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(U.a,{id:"username",className:"mb-2",label:"username",variant:"standard"}),Object(G.jsx)("br",{})]}):Object(G.jsx)(G.Fragment,{}),Object(G.jsx)(U.a,{id:"roomId",className:"mb-2",label:"roomId",variant:"standard"}),Object(G.jsx)("br",{}),1===a||2===a?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(U.a,{id:"password",className:"mb-2",type:"password",label:"password",variant:"standard"}),Object(G.jsx)("br",{}),1===a?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(U.a,{id:"conformpassword",className:"mb-2",type:"password",label:"conform password",variant:"standard"}),Object(G.jsx)("br",{}),Object(G.jsx)("br",{})]}):Object(G.jsx)(G.Fragment,{children:Object(G.jsx)("br",{})})]}):Object(G.jsx)(G.Fragment,{children:Object(G.jsx)("br",{})}),Object(G.jsx)(L.a,{variant:"outlined",color:0===a?"primary":1===a?"success":"secondary",className:"mb-3",onClick:c,children:0===a?"join room":1===a?"create room":2===a?"delete room":""})]})]})},K=function(){return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(T,{children:Object(G.jsx)(H,{})})})},P=function(){return Object(G.jsx)(K,{})},Q=t(26),V=C.a.div(o||(o=Object(I.a)(["\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    margin:2rem;\n    height: 94vh;\n    border: 1px solid #ccc;\n    @media (max-width:500px){\n        margin:0;\n    }\n    @media (max-width:770px){\n        height: auto;\n    }\n"]))),X=C.a.div(d||(d=Object(I.a)(["\n    height:50%;\n    overflow-y: scroll;\n    border: 1px solid #ccc;\n    @media (max-width:770px){\n        width:100%;\n    }\n"]))),Y=Object(C.a)(X)(m||(m=Object(I.a)(["\n"]))),Z=C.a.div(l||(l=Object(I.a)(["\n    height:100%;\n    width:30%;\n    @media (max-width:770px){\n        width:100%;\n        height:30vh;\n        order:2;\n        self-align:flex-end;\n    }\n"]))),$=C.a.div(j||(j=Object(I.a)(["\n    width:70%;\n    @media (max-width:770px){\n        width:100%;\n        order:1;\n        margin-bottom:1rem;\n    }\n"]))),ee=C.a.div(b||(b=Object(I.a)(["\n    padding:1rem;\n    border-bottom: 1px solid #ccc;\n"]))),ne=C.a.div(x||(x=Object(I.a)(["\n    display: flex;\n    flex-direction: column;\n    height:75vh;\n    border-bottom: 1px solid #ccc;\n    overflow-y: scroll;\n    @media (max-width:770px){\n        height:70vh;\n    }\n"]))),te=C.a.div(h||(h=Object(I.a)(["\n    background-color: #77cf6d;\n    width:max-content;\n    max-width:60%;\n    word-wrap: break-word;\n    font-size:1.2rem;\n    margin:0rem 1.5rem 1rem 1.5rem; \n    padding:1rem 0.7rem;\n    margin-left:auto;\n    border-radius:0.2rem;\n"]))),ae=C.a.div(p||(p=Object(I.a)(["\n    width:max-content;\n    max-width:60%;\n    word-wrap: break-word;\n    font-size:0.8rem;\n    margin:-1.4rem 1rem 0rem 0rem;\n    padding:1rem 0.7rem;\n    margin-left:auto;\n    border-radius:0.2rem;\n    font-weight:bold;\n"]))),re=Object(C.a)(te)(u||(u=Object(I.a)(["\n    background-color: #1890ff;\n    margin-left:1.5rem;\n    margin-right:auto;\n"]))),ce=Object(C.a)(re)(O||(O=Object(I.a)(["\n    background-color: #fff;  \n    font-weight:bold;\n    padding:0;\n    margin: -0.7rem auto 0rem 1.4rem;\n    font-size:0.8rem;\n"]))),se=Object(C.a)(ae)(g||(g=Object(I.a)(["\n    margin: 0.6rem 1rem 0.4rem 0rem;\n    margin-left:auto;\n    padding:0;\n    font-weight:900;\n    font-size:1rem;\n"]))),ie=Object(C.a)(ae)(f||(f=Object(I.a)(["\n    margin: 0.6rem 0rem 0.6rem 1.4rem;\n    margin-right:auto;\n    padding:0;\n    font-weight:900;\n    font-size:1rem;\n"]))),oe=t(185).a.Search,de=function(){var e,n=Object(S.f)(),t=v.a.useState([]),a=Object(J.a)(t,2),r=a[0],c=a[1],s=v.a.useState([]),i=Object(J.a)(s,2),o=i[0],d=i[1],m=v.a.useState([]),l=Object(J.a)(m,2),j=l[0],b=l[1],x=!1,h=Object(S.g)().room_name,p=localStorage.getItem("username")||"Anonymous",u=v.a.useState(null),O=Object(J.a)(u,2),g=O[0],f=O[1],w=function e(){g=new WebSocket("".concat(le,"/").concat(h)),f(g),g.onopen=function(){g.send(JSON.stringify({type:"ONLINE",username:p})),g.send(JSON.stringify({type:"get_room_data"}))},g.onmessage=function(e){var t=JSON.parse(e.data);null===t?(alert("Room not found"),n("/")):"ONLINE"===t.type?d(t.online_users):"typing"===t.type||"notTyping"===t.type?b(t.users_typing):void 0===t.data?c(t.messages):c((function(e){return[].concat(Object(Q.a)(e),[t.data])}))},g.onclose=function(){e()},g.onerror=function(e){console.log(e)}};v.a.useEffect((function(){w()}),[]);var y=function(){x&&(g.send(JSON.stringify({type:"notTyping",username:p,roomId:h})),x=!1,clearTimeout(e))};return Object(G.jsxs)(V,{children:[Object(G.jsxs)(Z,{children:[Object(G.jsxs)(X,{children:[Object(G.jsx)("h2",{className:"text-center",children:"Online Users"}),Object(G.jsx)("ul",{style:{width:"max-content",margin:"auto"},children:o.map((function(e,n){return Object(G.jsx)("li",{style:{fontSize:"1.2rem"},children:e},n)}))})]}),Object(G.jsxs)(Y,{children:[Object(G.jsx)("h2",{className:"text-center",children:"Typing Users"}),Object(G.jsx)("ul",{style:{width:"max-content",margin:"auto"},children:j.map((function(e,n){return Object(G.jsxs)("li",{style:{fontSize:"1.2rem"},children:[e," typing..."]},n)}))})]})]}),Object(G.jsxs)($,{children:[Object(G.jsx)(ee,{children:Object(G.jsx)("h2",{className:"text-center",children:h.length<=12?h:"".concat(h.substring(0,12),"...")})}),Object(G.jsx)(ne,{children:r.map((function(e,n){return e.username===p?Object(G.jsxs)("div",{children:[Object(G.jsx)(se,{children:e.username}),Object(G.jsx)(te,{children:e.message}),Object(G.jsx)(ae,{children:e.date})]},n):Object(G.jsxs)("div",{children:[Object(G.jsx)(ie,{children:e.username}),Object(G.jsx)(re,{children:e.message}),Object(G.jsx)(ce,{children:e.date})]},n)}))}),Object(G.jsx)("br",{}),Object(G.jsx)("div",{className:"mb-0 mx-3",children:Object(G.jsx)(oe,{id:"message",placeholder:"send a message ...",enterButton:"Send",size:"large",onChange:function(){!1===x&&(g.send(JSON.stringify({type:"typing",username:p,roomId:h})),x=!0,clearTimeout(e)),e=setTimeout(y,1e3)},onSearch:function(e){g.send(JSON.stringify({type:"send_message",data:{username:p,message:e}}))}})})]})]})};t(147);var me="http://localhost",le="ws://localhost",je=function(){return Object(G.jsx)("div",{className:"App",children:Object(G.jsx)(N.a,{children:Object(G.jsxs)(S.c,{children:[Object(G.jsx)(S.a,{path:"/",element:Object(G.jsx)(P,{})}),Object(G.jsx)(S.a,{path:"/chat/:room_name",element:Object(G.jsx)(de,{})})]})})})};k.a.render(Object(G.jsx)(v.a.StrictMode,{children:Object(G.jsx)(je,{})}),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.4e23292c.chunk.js.map